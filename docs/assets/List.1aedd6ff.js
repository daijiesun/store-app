import{G as a,g as s}from"./goods.19ac0f59.js";import{p as t,i as o,o as e,c as n,j as i,t as d,d as l,r as c,a as r,k as h,F as p,l as u}from"./vendor.686817f8.js";import{b as g}from"./index.a33a1a7c.js";var f={name:"GoodsPanel",props:{goods:{type:a,default:()=>new a}}};const v=l("data-v-380241f6");t("data-v-380241f6");const m={class:"goods-item"},w={class:"goods-item-info"},_={class:"title"},S={class:"price"},k=i("span",{class:"price-title"},"¥",-1),y={class:"price-count"};o();const j=v(((a,s,t,o,l,r)=>{const h=c("van-image");return e(),n("div",m,[i(h,{width:"100%",src:t.goods.avatar},null,8,["src"]),i("div",w,[i("div",_,[i("span",null,d(t.goods.title),1),i("span",null,d(t.goods.description),1)]),i("div",S,[k,i("span",y,d(t.goods.amount),1)])])])}));f.render=j,f.__scopeId="data-v-380241f6";class x{constructor(a){this.page=1,this.pageSize=20,this.sizes=[20,50,100],this.params=a}}class L{constructor(a){this.pageSize=20,this.total=0,this.page=1,this.data=a}}class G{constructor(){this.title=""}}var I={components:{GoodsPanel:f},name:"List",methods:{showInfo(a){this.$router.push({path:"/goods/detail",query:{id:a}})}},setup(){const a=r({loading:!1,finished:!1,config:g.config}),t=r(new x(new G)),o=r(new L([]));return{state:a,searchResult:o,searchData:t,onLoad:async()=>{const e=await s(t);Object.assign(o,e,{data:[...o.data,...e.data]}),a.loading=!1,t.page++,o.data.length>=o.total&&(a.finished=!0)},onSearch:()=>{}}}};const b=l("data-v-d7668c4a"),z=b(((a,s,t,o,d,l)=>{const r=c("van-notice-bar"),g=c("van-search"),f=c("van-sticky"),v=c("GoodsPanel"),m=c("van-col"),w=c("van-row"),_=c("van-list");return e(),n("div",null,[i(f,null,{default:b((()=>[o.state.config.topTip?(e(),n(r,{key:0,"left-icon":"volume-o",text:o.state.config.topTip},null,8,["text"])):h("",!0),i(g,{modelValue:o.searchData.title,"onUpdate:modelValue":s[2]||(s[2]=a=>o.searchData.title=a),"show-action":"",placeholder:"请输入搜索关键词",onSearch:o.onSearch},{action:b((()=>[i("div",{onClick:s[1]||(s[1]=(...a)=>o.onSearch&&o.onSearch(...a))},"搜索")])),_:1},8,["modelValue","onSearch"])])),_:1}),i(_,{loading:o.state.loading,"onUpdate:loading":s[3]||(s[3]=a=>o.state.loading=a),finished:o.state.finished,"finished-text":"没有更多了",onLoad:o.onLoad},{default:b((()=>[i(w,{gutter:"12"},{default:b((()=>[(e(!0),n(p,null,u(o.searchResult.data,((a,s)=>(e(),n(m,{span:"12",key:s},{default:b((()=>[i(v,{goods:a,onClick:s=>l.showInfo(a.id)},null,8,["goods","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["loading","finished","onLoad"])])}));I.render=z,I.__scopeId="data-v-d7668c4a";export default I;
