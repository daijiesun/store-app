import{G as a,g as s}from"./goods.cab1ff26.js";import{p as t,i as o,o as e,c as n,j as i,t as d,d as l,r as c,a as r,k as p,l as h,F as g,m as u}from"./vendor.068286c1.js";import{b as f}from"./index.2bab836f.js";var v={name:"GoodsPanel",props:{goods:{type:a,default:()=>new a}}};const m=l("data-v-380241f6");t("data-v-380241f6");const w={class:"goods-item"},y={class:"goods-item-info"},k={class:"title"},_={class:"price"},S=i("span",{class:"price-title"},"¥",-1),b={class:"price-count"};o();const j=m(((a,s,t,o,l,r)=>{const p=c("van-image");return e(),n("div",w,[i(p,{width:"100%",src:t.goods.avatar},null,8,["src"]),i("div",y,[i("div",k,[i("span",null,d(t.goods.title),1),i("span",null,d(t.goods.description),1)]),i("div",_,[S,i("span",b,d(t.goods.amount),1)])])])}));v.render=j,v.__scopeId="data-v-380241f6";class x{constructor(a){this.page=1,this.pageSize=20,this.sizes=[20,50,100],this.params=a}}class L{constructor(a){this.pageSize=20,this.total=0,this.page=1,this.data=a}}class G{constructor(){this.title="",this.isValid=!0,this.type=""}}var I={components:{GoodsPanel:v},name:"List",methods:{showInfo(a){this.$router.push({path:"/goods/detail",query:{id:a}})}},setup(){const a=r({loading:!1,finished:!1,config:f.config}),t=r(new x(new G)),o=r(new L([])),e=async()=>{const e=await s(t);Object.assign(o,e,{data:[...o.data,...e.data]}),a.loading=!1,t.page++,o.data.length>=o.total&&(a.finished=!0)},n=()=>{t.page=1,o.data=[],e()};return p((()=>{n()})),{state:a,searchResult:o,searchData:t,onLoad:e,onSearch:n}}};const V=l("data-v-d7668c4a"),z=V(((a,s,t,o,d,l)=>{const r=c("van-notice-bar"),p=c("van-search"),f=c("van-sticky"),v=c("GoodsPanel"),m=c("van-col"),w=c("van-row"),y=c("van-list"),k=c("van-empty");return e(),n("div",null,[i(f,null,{default:V((()=>[o.state.config.topTip?(e(),n(r,{key:0,"left-icon":"volume-o",text:o.state.config.topTip},null,8,["text"])):h("",!0),i(p,{modelValue:o.searchData.params.title,"onUpdate:modelValue":s[2]||(s[2]=a=>o.searchData.params.title=a),"show-action":"",placeholder:"请输入搜索关键词",onSearch:o.onSearch},{action:V((()=>[i("div",{onClick:s[1]||(s[1]=(...a)=>o.onSearch&&o.onSearch(...a))},"搜索")])),_:1},8,["modelValue","onSearch"])])),_:1}),o.searchResult.data.length?(e(),n(y,{key:0,loading:o.state.loading,"onUpdate:loading":s[3]||(s[3]=a=>o.state.loading=a),finished:o.state.finished,"finished-text":"没有更多了",onLoad:o.onLoad},{default:V((()=>[i(w,{gutter:"12"},{default:V((()=>[(e(!0),n(g,null,u(o.searchResult.data,((a,s)=>(e(),n(m,{span:"12",key:s},{default:V((()=>[i(v,{goods:a,onClick:s=>l.showInfo(a.id)},null,8,["goods","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["loading","finished","onLoad"])):(e(),n(k,{key:1,description:"啥也没有～"}))])}));I.render=z,I.__scopeId="data-v-d7668c4a";export default I;
